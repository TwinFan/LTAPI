<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LTAPI: LTAPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LTAPI
   </div>
   <div id="projectbrief">API to access LiveTraffic&#39;s aircraft information</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">LTAPI</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>API to access LiveTraffic's aircraft information. Data transfer from LiveTraffic to your plugin is by dataRefs in a fast, efficient way: LiveTraffic copies data of several planes combined into defined structures. LTAPI handles all that in the background and provides you with an array of aircraft information with numerical info like position, heading, speed and textual info like type, registration, call sign, flight number.</p>
<h1>LTAPI files and Documentation</h1>
<p>You only need to include 2 files into your own projects:</p>
<ul>
<li><code><a class="el" href="LTAPI_8cpp.html" title="LiveTraffic API.">LTAPI.cpp</a></code></li>
<li><code><a class="el" href="LTAPI_8h.html" title="LiveTraffic API.">LTAPI.h</a></code></li>
</ul>
<p>Both files include lots of comments in Doxygen style as <b>documentation</b>. The generated Doxygen documentation is available in <code>docs/html/index.html</code> or on <a href="https://twinfan.github.io/LTAPI/html/index.html">GitHub pages</a>.</p>
<h1>Example Plugin Implementation</h1>
<p><a href="https://github.com/TwinFan/LTAPI/actions/workflows/build.yml"><img src="https://github.com/TwinFan/LTAPI/actions/workflows/build.yml/badge.svg" alt="Build all Platforms" style="pointer-events: none;" class="inline"/></a></p>
<p>The <code>Example</code> folder includes an example X-Plane plugin (based on the <a href="https://developer.x-plane.com/code-sample/hello-world-sdk-3/">Hello World plugin</a>), which demonstrates the most simplistic usage as well as an enhanced way of using the API by subclassing the provided <code><a class="el" href="classLTAPIAircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> class.</p>
<p>The plugin just opens two windows and shows information about LiveTraffic's aircrafts as text.</p>
<h2>Simple Example</h2>
<p>...starts at around line 195 of <code>LTAPIExample.xpp</code>. Look for <code>MARK: LTAPI Simple Example</code>. It just</p>
<ul>
<li>uses a static <code><a class="el" href="classLTAPIConnect.html" title="Connects to LiveTraffic&#39;s dataRefs and returns aircraft information.">LTAPIConnect</a></code> object,</li>
<li>calls its function <code>UpdateAcList()</code> every second via a flight loop callback, and</li>
<li>loops the resulting map of aircrafts for display of textual information in the output window.</li>
</ul>
<h2>Enhanced Example</h2>
<p>...starts at around line 269 of <code>LTAPIExample.xpp</code>. Look for <code>MARK: LTAPI Enhanced Example</code>. This demonstrates how to use <code><a class="el" href="classLTAPIAircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> as a base class for some own class. Often, you have your own way of representing aircrafts in your app already. You can add <code><a class="el" href="classLTAPIAircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> as a base class and then don't need to copy information back and forth but have access to it right from within your own class.</p>
<p>For this to work you</p>
<ul>
<li>need to subclass <code><a class="el" href="classLTAPIAircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code>,</li>
<li>may want to do init/cleanup work in the constructor and destructor,</li>
<li>may want to override <code>virtual bool updateAircraft()</code> so that you can do some own work whenever a/c information changes,</li>
<li>must provide a callback for creating new empty objects when <code><a class="el" href="classLTAPIConnect.html#afa284f32cfc1e22bfecbb299a1d99a85" title="Main function: updates map of aircrafts and returns reference to it.">LTAPIConnect::UpdateAcList()</a></code> finds a new aircraft in the sky.</li>
<li>most likely want to handle the list of removed aircrafts (before they are destroyed) similar to what <code>LoopCBUpdateAcListEnhanced</code> does.</li>
</ul>
<p>All the rest of the code deals with the example's functionality, which is:</p>
<ul>
<li>The class <code>EnhAircraft</code> also manages the line number in the output display, i.e. once it found a line it stays there. Also allows to show text "---removed---" for some time when a/c was removed.</li>
<li>Each line provides more information as the simple example and renders that info in fairly well aligned columns.</li>
</ul>
<h1>Building the Example</h1>
<h2>IDEs</h2>
<ul>
<li>Mac: Open the XCode project <code>LTAPI.xcodeproj</code>. There might be paths you way want to check: In the Build Settings there is a user-defined setting <code>XPLANE11_ROOT</code> pointing to the root folder of your X-Plane 11 installation. If that is set correctly then the resulting plugin is installed there correctly in the <code>plugins</code> folder.</li>
<li>Windows: Open the Visual Studio solution <code>LTAPI.sln</code>. Also here you might need to check directories. There is a copy command to my X-Plane installation in the <em>Post Build Event</em>.</li>
</ul>
<h2>Docker</h2>
<p>As I don't have a Linux environment myself I provide a Docker environment to build the Linux version as well as the Windows and the Mac version based on a <code>CMakeList</code>. I have not tested the resulting Linux binary.</p><ul>
<li>You need <a href="https://www.docker.com/get-started">Docker</a> installed. Then, with the Docker app running:</li>
<li><code>cd Example/docker</code></li>
<li><code>make</code></li>
</ul>
<p>You will find the resulting binaries as <code>build-&lt;platform&gt;/&lt;platform&gt;_x64/LTAPIExample.xpl</code>.</p>
<h2>Github Actions</h2>
<p>The LTAPI Example builds on Github, see <a href="https://github.com/TwinFan/LTAPI/blob/master/.github/workflows/build.yml"><code>.github/workflows/build.yml</code></a>.</p>
<h1>Installation of the Example</h1>
<p>The LTAPI Example plugin is just one small binary file to be installed like any other X-Plane plugin under <code>&lt;X-Plane&gt;/Resources/plugins</code>. For all 3 platforms you end up with the following folder and file structure:</p>
<div class="fragment"><div class="line">&lt;X-Plane&gt;/Resources/plugins/</div>
<div class="line">    LTAPIExample/</div>
<div class="line">        lin_x64/</div>
<div class="line">            LTAPIExample.xpl</div>
<div class="line">        mac_x64/</div>
<div class="line">            LTAPIExample.xpl</div>
<div class="line">        win_x64/</div>
<div class="line">            LTAPIExample.xpl</div>
</div><!-- fragment --><h1>What it looks like</h1>
<p>This is a screenshot taken from the Example plugin included in this project:</p>
<p><img src="https://raw.githubusercontent.com/TwinFan/LTAPI/refs/heads/master/Example/LTAPIExample.png" alt="LTAPI Example Screenshot" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
