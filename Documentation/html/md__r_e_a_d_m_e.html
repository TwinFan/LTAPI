<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LTAPI: LTAPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LTAPI
   </div>
   <div id="projectbrief">API to access LiveTraffic&#39;s aircraft information</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_l_t_a_p_i.html">LTAPI</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>API to access LiveTraffic's aircraft information. Data transfer from LiveTraffic to your plugin is by dataRefs in a fast, efficient way: LiveTraffic copies data of several planes combined into defined structures. <a class="el" href="namespace_l_t_a_p_i.html">LTAPI</a> handles all that in the background and provides you with an array of aircraft information with numerical info like position, heading, speed and textual info like type, registration, call sign, flight number. <b>Note:</b> This efficient bulk transfer interface is implemented with LiveTraffic v1.20 only. Earlier versions will not deliver any aircraft data.</p>
<h2><a class="el" href="namespace_l_t_a_p_i.html">LTAPI</a> files</h2>
<p>You only need to include 2 files into your own projects:</p><ul>
<li><code><a class="el" href="_l_t_a_p_i_8cpp.html">LTAPI.cpp</a></code></li>
<li><code><a class="el" href="_l_t_a_p_i_8h.html">LTAPI.h</a></code></li>
</ul>
<p>Both files include lots of comments in Doxygen style as documentation. The generated Doxygen documentation is available in <code>Documentation/html/index.html</code>.</p>
<h2>Example Plugin Implementation</h2>
<p>The <code>Example</code> folder includes an example X-Plane plugin (based on the <a href="https://developer.x-plane.com/code-sample/hello-world-sdk-3/">Hello World plugin</a>), which demonstrates the most simplistic usage as well as an enhanced way of using the API by subclassing the provided <code><a class="el" href="class_l_t_a_p_i_aircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> class.</p>
<p>The plugin just opens two windows and shows information about LiveTraffic's aircrafts as text.</p>
<h3>Simple Example</h3>
<p>...starts at around line 195 of <code>LTAPIExample.xpp</code>. Look for <code>MARK: <a class="el" href="namespace_l_t_a_p_i.html">LTAPI</a> Simple Example</code>. It just</p><ul>
<li>uses a static <code><a class="el" href="class_l_t_a_p_i_connect.html" title="Connects to LiveTraffic&#39;s dataRefs and returns aircraft information.">LTAPIConnect</a></code> object,</li>
<li>calls its function <code>UpdateAcList()</code> every second via a flight loop callback, and</li>
<li>loops the resulting map of aircrafts for display of textual information in the output window.</li>
</ul>
<h3>Enhanced Example</h3>
<p>...starts at around line 269 of <code>LTAPIExample.xpp</code>. Look for <code>MARK: <a class="el" href="namespace_l_t_a_p_i.html">LTAPI</a> Enhanced Example</code>. This demonstrates how to use <code><a class="el" href="class_l_t_a_p_i_aircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> as a base class for some own class. Often, you have your own way of representing aircrafts in your app already. You can add <code><a class="el" href="class_l_t_a_p_i_aircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code> as a base class and then don't need to copy information back and forth but have access to it right from within your own class.</p>
<p>For this to work you</p><ul>
<li>need to subclass <code><a class="el" href="class_l_t_a_p_i_aircraft.html" title="Represents one aircraft as controlled by LiveTraffic.">LTAPIAircraft</a></code>,</li>
<li>may want to do init/cleanup work in the constructor and destructor,</li>
<li>may want to override <code>virtual bool updateAircraft()</code> so that you can do some own work whenever a/c information changes,</li>
<li>must provide a callback for creating new empty objects when <code><a class="el" href="class_l_t_a_p_i_connect.html#afa284f32cfc1e22bfecbb299a1d99a85" title="Main function: updates map of aircrafts and returns reference to it.">LTAPIConnect::UpdateAcList()</a></code> finds a new aircraft in the sky.</li>
<li>most likely want to handle the list of removed aircrafts (before they are destroyed) similar to what <code>LoopCBUpdateAcListEnhanced</code> does.</li>
</ul>
<p>All the rest of the code deals with the example, which is:</p><ul>
<li>The class <code>EnhAircraft</code> also manages the line number in the output display, i.e. once it found a line it stays there. Also allows to show text "---removed---" for some time when a/c was removed.</li>
<li>Each line provides more information as the simple example and renders that info in fairly well aligned columns.</li>
</ul>
<h2>Building the Example</h2>
<ul>
<li>Mac: Open the XCode project <code>LTAPI.xcodeproj</code>. There might be paths you way want to check...especially the path the resulting plugin is copied to after build (Targets &gt; Build Phases &gt; Copy Files).</li>
<li>Windows: Open the Visual Studio solution <code>LTAPI.sln</code>. Also here you might need to check directories. There is a copy command to my X-Plane installation in the <em>Post Build Event</em>.</li>
<li>Linux: As I don't have a Linux environment myself I provide a Docker environment to build the Linux version based on a <code>CMakeList</code>. I have not tested the resulting binary <code>LTAPIExample-lin.xpl</code>. Can't even say if it starts.</li>
<li>You need <a href="https://www.docker.com/get-started">Docker</a> installed. The, with Docker app running:</li>
<li><code>cd Example/docker</code></li>
<li><code>make</code></li>
</ul>
<h2>What is looks like</h2>
<img src="Example/LTAPIExample.png" alt="LTAPI Example Screenshot" class="inline"/>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
